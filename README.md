# Тестовая система на Django

## Описание проекта

Данное приложение разработано для создания и прохождения тестов. Администраторы могут управлять тестами, добавлять вопросы с различными типами ответов (один вариант, несколько вариантов, текстовые ответы) и просматривать результаты пользователей. Пользователи могут проходить тесты, вводить свои ответы и получать результаты.

## Установка и запуск

1. Клонируйте репозиторий:
    ```bash
    git clone https://github.com/chaous/django_testing
    cd django_testing
    ```

2. Убедитесь, что у вас установлен Python версии 3.8 или выше.

3. Установите виртуальное окружение и активируйте его:
    ```bash
    python -m venv venv
    source venv/bin/activate  # Для Linux/Mac
    venv\Scripts\activate  # Для Windows
    ```

4. Установите зависимости:
    ```bash
    pip install -r requirements.txt
    ```

5. Выполните миграции для базы данных:
    ```bash
    python manage.py makemigrations
    python manage.py migrate
    ```

6. Создайте суперпользователя для доступа к административной панели:
    ```bash
    python manage.py createsuperuser
    ```

7. Запустите сервер разработки:
    ```bash
    python manage.py runserver
    ```

8. Откройте приложение в браузере по адресу [http://127.0.0.1:8000](http://127.0.0.1:8000).

## Тестирование

Для проверки работы приложения вы можете запустить тесты:
    ```bash
    python manage.py test
    ```

### Детали тестирования
1. **Проверка основных функций:**
   - Создание тестов.
   - Добавление вопросов с разными типами (один вариант, несколько вариантов, текст).
   - Обработка ответов пользователей.

2. **Проверка прохождения тестов:**
   - Пользователи могут корректно проходить тесты.
   - Проверяется соответствие правильных/неправильных ответов.

3. **Проверка корректности подсчета баллов:**
   - Баллы начисляются только за верные ответы.
   - Проверяются различные комбинации ответов для вопросов с несколькими вариантами.

4. **Тестирование интерфейса:**
   - Проверяется отображение страниц для пользователей и администраторов.

5. **Ошибки и обработка исключений:**
   - Проверяется корректная обработка ошибок при недоступных страницах или некорректных данных.

## Основной функционал

### Для администраторов
- Создание, редактирование и удаление тестов.
- Добавление вопросов с типами:
  - Один правильный вариант.
  - Несколько правильных вариантов.
  - Текстовые ответы (с поддержкой нескольких корректных ответов).
- Просмотр детализированных результатов пользователей (включая ответы на каждый вопрос).

### Для пользователей
- Регистрация и авторизация.
- Прохождение тестов с отображением результатов.
- Детализация результатов: верные и неверные ответы.

## Технические детали

### Модели
1. **`Test`**: модель теста, содержащая вопросы.
2. **`Question`**: модель вопроса, имеет тип:
   - `single` — один правильный вариант.
   - `multiple` — несколько правильных вариантов.
   - `text` — текстовые ответы.
3. **`AnswerOption`**: варианты ответа для вопросов.
4. **`StudentTest`**: хранит информацию о прохождении теста пользователем.
5. **`StudentAnswer`**: ответы пользователей.

### Файловая структура
- **`testapp/`**: приложение, содержащее логику тестов.
- **`templates/testapp/`**: HTML-шаблоны для отображения страниц.
- **`testapp/tests.py`**: тестовые сценарии.

### Расширение функционала
- Добавление новых типов вопросов возможно через изменение модели `Question` и соответствующих форм.
- Тестовые сценарии можно добавлять в `testapp/tests.py`, создавая функции, начинающиеся с `test_`.

### Административная панель
Доступна по адресу [http://127.0.0.1:8000/admin](http://127.0.0.1:8000/admin).



### Запуск сервера с ngrok

Для того чтобы сервер был доступен с других устройств, можно использовать ngrok:

1. Установите ngrok (если еще не установили):
```bash
brew install ngrok
```

   Для других систем инструкции можно найти [здесь](https://ngrok.com/download).

2. Запустите локальный сервер Django:
```bash
python manage.py runserver 0.0.0.0:8000
```

3. В другой терминальной вкладке запустите ngrok:
```bash
ngrok http 8000
```

4. После запуска ngrok вы увидите публичный URL, например:
```perl
Forwarding    https://11f4-94-43-64-238.ngrok-free.app -> http://localhost:8000
```

5. Добавьте текущий публичный URL ngrok в настройку `CSRF_TRUSTED_ORIGINS` в `settings.py`:
```python
CSRF_TRUSTED_ORIGINS = [
    'https://11f4-94-43-64-238.ngrok-free.app'
]
```

6. Теперь сервер будет доступен по публичному URL, который выдает ngrok.

⚠️ Примечание: если вы используете бесплатную версию ngrok, публичный URL будет меняться после каждого перезапуска ngrok. В этом случае вам нужно будет каждый раз обновлять `CSRF_TRUSTED_ORIGINS`.
